<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Confirmação de Idade</title>
  <style>
    /* [MANTENHA TODOS OS ESTILOS EXISTENTES] */
  </style>
</head>
<body>
  <div class="loading">Verificando acesso...</div>

  <!-- [MANTENHA TODO O HTML EXISTENTE] -->

  <script>
    // Verificação combinada de IP e dispositivo
    async function verifyAccess() {
      try {
        // 1. Verifica se é mobile
        const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (!isMobile) {
          window.location.href = "https://www.atelevisao.com";
          return;
        }

        // 2. Verificação de IP (opcional)
        const ipResponse = await fetch('https://ipapi.co/json/');
        const ipData = await ipResponse.json();
        
        const allowedCountries = ['BR', 'PT'];
        
        if (!allowedCountries.includes(ipData.country)) {
          window.location.href = "https://www.atelevisao.com";
          return;
        }

        // Se passou nas verificações, mostra o conteúdo
        document.body.style.display = 'block';
        document.querySelector('.loading').style.display = 'none';
        
        // ADICIONE ESTA PARTE PARA PREVENIR BLOQUEIO DE LINKS
        document.querySelectorAll('.quiz-buttons a').forEach(link => {
          link.addEventListener('click', function(e) {
            // Permite o comportamento padrão do link
            return true;
          });
        });
        
      } catch (error) {
        console.error('Erro na verificação:', error);
        document.body.style.display = 'block';
        document.querySelector('.loading').style.display = 'none';
        
        // Garante que os links funcionem mesmo com erro
        document.querySelectorAll('.quiz-buttons a').forEach(link => {
          link.addEventListener('click', function(e) {
            return true;
          });
        });
      }
    }

    // Inicia a verificação quando a página carrega
    document.addEventListener('DOMContentLoaded', verifyAccess);
  </script>
</body>
</html>
